{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _assertThisInitialized from\"@babel/runtime/helpers/assertThisInitialized\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}import*as React from'react';import Animated from\"react-native-web/dist/exports/Animated\";import Easing from\"react-native-web/dist/exports/Easing\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import I18nManager from\"react-native-web/dist/exports/I18nManager\";import Platform from\"react-native-web/dist/exports/Platform\";var TabBarIndicator=function(_React$Component){_inherits(TabBarIndicator,_React$Component);var _super=_createSuper(TabBarIndicator);function TabBarIndicator(){var _this;_classCallCheck(this,TabBarIndicator);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_defineProperty(_assertThisInitialized(_this),\"fadeInIndicator\",function(){var _this$props=_this.props,navigationState=_this$props.navigationState,layout=_this$props.layout,width=_this$props.width,getTabWidth=_this$props.getTabWidth;if(!_this.isIndicatorShown&&width==='auto'&&layout.width&&navigationState.routes.every(function(_,i){return getTabWidth(i);})){_this.isIndicatorShown=true;Animated.timing(_this.opacity,{toValue:1,duration:150,easing:Easing.in(Easing.linear),useNativeDriver:true}).start();}});_defineProperty(_assertThisInitialized(_this),\"isIndicatorShown\",false);_defineProperty(_assertThisInitialized(_this),\"opacity\",new Animated.Value(_this.props.width==='auto'?0:1));_defineProperty(_assertThisInitialized(_this),\"getTranslateX\",function(position,routes,getTabWidth){var inputRange=routes.map(function(_,i){return i;});var outputRange=routes.reduce(function(acc,_,i){if(i===0)return[0];return[].concat(_toConsumableArray(acc),[acc[i-1]+getTabWidth(i-1)]);},[]);var translateX=position.interpolate({inputRange:inputRange,outputRange:outputRange,extrapolate:'clamp'});return Animated.multiply(translateX,I18nManager.isRTL?-1:1);});return _this;}_createClass(TabBarIndicator,[{key:\"componentDidMount\",value:function componentDidMount(){this.fadeInIndicator();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){this.fadeInIndicator();}},{key:\"render\",value:function render(){var _this$props2=this.props,position=_this$props2.position,navigationState=_this$props2.navigationState,getTabWidth=_this$props2.getTabWidth,width=_this$props2.width,style=_this$props2.style,layout=_this$props2.layout;var routes=navigationState.routes;var transform=[];if(layout.width){var translateX=routes.length>1?this.getTranslateX(position,routes,getTabWidth):0;transform.push({translateX:translateX});}if(width==='auto'){var inputRange=routes.map(function(_,i){return i;});var outputRange=inputRange.map(getTabWidth);transform.push({scaleX:routes.length>1?position.interpolate({inputRange:inputRange,outputRange:outputRange,extrapolate:'clamp'}):outputRange[0]},{translateX:0.5});}return React.createElement(Animated.View,{style:[styles.indicator,{width:width==='auto'?1:width},layout.width&&Platform.OS!=='macos'?{left:0}:{left:100/routes.length*navigationState.index+\"%\"},{transform:transform},width==='auto'?{opacity:this.opacity}:null,style]});}}]);return TabBarIndicator;}(React.Component);export{TabBarIndicator as default};var styles=StyleSheet.create({indicator:{backgroundColor:'#ffeb3b',position:'absolute',left:0,bottom:0,right:0,height:2}});","map":{"version":3,"sources":["TabBarIndicator.tsx"],"names":["React","componentDidMount","componentDidUpdate","getTabWidth","width","layout","navigationState","Animated","toValue","duration","easing","Easing","useNativeDriver","inputRange","routes","outputRange","i","acc","translateX","extrapolate","I18nManager","render","transform","scaleX","styles","Platform","left","index","opacity","indicator","backgroundColor","position","bottom","right","height"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  Animated,\n  Easing,\n  StyleSheet,\n  I18nManager,\n  StyleProp,\n  ViewStyle,\n  Platform,\n} from 'react-native';\n\nimport type { Route, SceneRendererProps, NavigationState } from './types';\n\nexport type GetTabWidth = (index: number) => number;\n\nexport type Props<T extends Route> = SceneRendererProps & {\n  navigationState: NavigationState<T>;\n  width: string | number;\n  style?: StyleProp<ViewStyle>;\n  getTabWidth: GetTabWidth;\n};\n\nexport default class TabBarIndicator<T extends Route> extends React.Component<\n  Props<T>\n> {\n  componentDidMount() {\n    this.fadeInIndicator();\n  }\n\n  componentDidUpdate() {\n    this.fadeInIndicator();\n  }\n\n  private fadeInIndicator = () => {\n    const { navigationState, layout, width, getTabWidth } = this.props;\n\n    if (\n      !this.isIndicatorShown &&\n      width === 'auto' &&\n      layout.width &&\n      // We should fade-in the indicator when we have widths for all the tab items\n      navigationState.routes.every((_, i) => getTabWidth(i))\n    ) {\n      this.isIndicatorShown = true;\n\n      Animated.timing(this.opacity, {\n        toValue: 1,\n        duration: 150,\n        easing: Easing.in(Easing.linear),\n        useNativeDriver: true,\n      }).start();\n    }\n  };\n\n  private isIndicatorShown = false;\n\n  private opacity = new Animated.Value(this.props.width === 'auto' ? 0 : 1);\n\n  private getTranslateX = (\n    position: Animated.AnimatedInterpolation,\n    routes: Route[],\n    getTabWidth: GetTabWidth\n  ) => {\n    const inputRange = routes.map((_, i) => i);\n\n    // every index contains widths at all previous indices\n    const outputRange = routes.reduce<number[]>((acc, _, i) => {\n      if (i === 0) return [0];\n      return [...acc, acc[i - 1] + getTabWidth(i - 1)];\n    }, []);\n\n    const translateX = position.interpolate({\n      inputRange,\n      outputRange,\n      extrapolate: 'clamp',\n    });\n\n    return Animated.multiply(translateX, I18nManager.isRTL ? -1 : 1);\n  };\n\n  render() {\n    const { position, navigationState, getTabWidth, width, style, layout } =\n      this.props;\n    const { routes } = navigationState;\n\n    const transform = [];\n\n    if (layout.width) {\n      const translateX =\n        routes.length > 1\n          ? this.getTranslateX(position, routes, getTabWidth)\n          : 0;\n\n      transform.push({ translateX });\n    }\n\n    if (width === 'auto') {\n      const inputRange = routes.map((_, i) => i);\n      const outputRange = inputRange.map(getTabWidth);\n\n      transform.push(\n        {\n          scaleX:\n            routes.length > 1\n              ? position.interpolate({\n                  inputRange,\n                  outputRange,\n                  extrapolate: 'clamp',\n                })\n              : outputRange[0],\n        },\n        { translateX: 0.5 }\n      );\n    }\n\n    return (\n      <Animated.View\n        style={[\n          styles.indicator,\n          { width: width === 'auto' ? 1 : width },\n          // If layout is not available, use `left` property for positioning the indicator\n          // This avoids rendering delay until we are able to calculate translateX\n          // If platform is macos use `left` property as `transform` is broken at the moment.\n          // See: https://github.com/microsoft/react-native-macos/issues/280\n          layout.width && Platform.OS !== 'macos'\n            ? { left: 0 }\n            : { left: `${(100 / routes.length) * navigationState.index}%` },\n          { transform },\n          width === 'auto' ? { opacity: this.opacity } : null,\n          style,\n        ]}\n      />\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  indicator: {\n    backgroundColor: '#ffeb3b',\n    position: 'absolute',\n    left: 0,\n    bottom: 0,\n    right: 0,\n    height: 2,\n  },\n});\n"]},"metadata":{},"sourceType":"module"}