{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React from'react';import{useLogger}from\"./contexts\";import{useTimeout}from\"./hooks\";import{noop}from\"./utils/func\";import{mergeIfDefined}from\"./utils/obj\";export var DEFAULT_DATA={text1:undefined,text2:undefined};export var DEFAULT_OPTIONS={type:'success',position:'top',autoHide:true,visibilityTime:4000,topOffset:40,bottomOffset:40,keyboardOffset:10,onShow:noop,onHide:noop,onPress:noop,props:{}};export function useToast(_ref){var defaultOptions=_ref.defaultOptions;var _useLogger=useLogger(),log=_useLogger.log;var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isVisible=_React$useState2[0],setIsVisible=_React$useState2[1];var _React$useState3=React.useState(DEFAULT_DATA),_React$useState4=_slicedToArray(_React$useState3,2),data=_React$useState4[0],setData=_React$useState4[1];var initialOptions=mergeIfDefined(DEFAULT_OPTIONS,defaultOptions);var _React$useState5=React.useState(initialOptions),_React$useState6=_slicedToArray(_React$useState5,2),options=_React$useState6[0],setOptions=_React$useState6[1];var onAutoHide=React.useCallback(function(){log('Auto hiding');setIsVisible(false);options.onHide();},[log,options]);var _useTimeout=useTimeout(onAutoHide,options.visibilityTime),startTimer=_useTimeout.startTimer,clearTimer=_useTimeout.clearTimer;var hide=React.useCallback(function(){log('Hiding');setIsVisible(false);clearTimer();options.onHide();},[clearTimer,log,options]);var show=React.useCallback(function(params){log(\"Showing with params: \"+JSON.stringify(params));var _params$text=params.text1,text1=_params$text===void 0?DEFAULT_DATA.text1:_params$text,_params$text2=params.text2,text2=_params$text2===void 0?DEFAULT_DATA.text2:_params$text2,_params$type=params.type,type=_params$type===void 0?initialOptions.type:_params$type,_params$position=params.position,position=_params$position===void 0?initialOptions.position:_params$position,_params$autoHide=params.autoHide,autoHide=_params$autoHide===void 0?initialOptions.autoHide:_params$autoHide,_params$visibilityTim=params.visibilityTime,visibilityTime=_params$visibilityTim===void 0?initialOptions.visibilityTime:_params$visibilityTim,_params$topOffset=params.topOffset,topOffset=_params$topOffset===void 0?initialOptions.topOffset:_params$topOffset,_params$bottomOffset=params.bottomOffset,bottomOffset=_params$bottomOffset===void 0?initialOptions.bottomOffset:_params$bottomOffset,_params$keyboardOffse=params.keyboardOffset,keyboardOffset=_params$keyboardOffse===void 0?initialOptions.keyboardOffset:_params$keyboardOffse,_params$onShow=params.onShow,onShow=_params$onShow===void 0?initialOptions.onShow:_params$onShow,_params$onHide=params.onHide,onHide=_params$onHide===void 0?initialOptions.onHide:_params$onHide,_params$onPress=params.onPress,onPress=_params$onPress===void 0?initialOptions.onPress:_params$onPress,_params$props=params.props,props=_params$props===void 0?initialOptions.props:_params$props;setData({text1:text1,text2:text2});setOptions(mergeIfDefined(initialOptions,{type:type,position:position,autoHide:autoHide,visibilityTime:visibilityTime,topOffset:topOffset,bottomOffset:bottomOffset,keyboardOffset:keyboardOffset,onShow:onShow,onHide:onHide,onPress:onPress,props:props}));setIsVisible(true);onShow();},[initialOptions,log]);React.useEffect(function(){var autoHide=options.autoHide;if(isVisible){if(autoHide){startTimer();}else{clearTimer();}}},[isVisible,options,startTimer,clearTimer]);return{isVisible:isVisible,data:data,options:options,show:show,hide:hide};}","map":{"version":3,"sources":["/home/telix/crypto-notes/cryto-notes/node_modules/react-native-toast-message/lib/src/useToast.js"],"names":["React","useLogger","useTimeout","noop","mergeIfDefined","DEFAULT_DATA","text1","undefined","text2","DEFAULT_OPTIONS","type","position","autoHide","visibilityTime","topOffset","bottomOffset","keyboardOffset","onShow","onHide","onPress","props","useToast","defaultOptions","log","useState","isVisible","setIsVisible","data","setData","initialOptions","options","setOptions","onAutoHide","useCallback","startTimer","clearTimer","hide","show","params","JSON","stringify","useEffect"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useLogger } from './contexts';\nimport { useTimeout } from './hooks';\nimport { noop } from './utils/func';\nimport { mergeIfDefined } from './utils/obj';\nexport const DEFAULT_DATA = {\n    text1: undefined,\n    text2: undefined\n};\nexport const DEFAULT_OPTIONS = {\n    type: 'success',\n    position: 'top',\n    autoHide: true,\n    visibilityTime: 4000,\n    topOffset: 40,\n    bottomOffset: 40,\n    keyboardOffset: 10,\n    onShow: noop,\n    onHide: noop,\n    onPress: noop,\n    props: {}\n};\nexport function useToast({ defaultOptions }) {\n    const { log } = useLogger();\n    const [isVisible, setIsVisible] = React.useState(false);\n    const [data, setData] = React.useState(DEFAULT_DATA);\n    const initialOptions = mergeIfDefined(DEFAULT_OPTIONS, defaultOptions);\n    const [options, setOptions] = React.useState(initialOptions);\n    const onAutoHide = React.useCallback(() => {\n        log('Auto hiding');\n        setIsVisible(false);\n        options.onHide();\n    }, [log, options]);\n    const { startTimer, clearTimer } = useTimeout(onAutoHide, options.visibilityTime);\n    const hide = React.useCallback(() => {\n        log('Hiding');\n        setIsVisible(false);\n        clearTimer();\n        options.onHide();\n    }, [clearTimer, log, options]);\n    const show = React.useCallback((params) => {\n        log(`Showing with params: ${JSON.stringify(params)}`);\n        const { text1 = DEFAULT_DATA.text1, text2 = DEFAULT_DATA.text2, type = initialOptions.type, position = initialOptions.position, autoHide = initialOptions.autoHide, visibilityTime = initialOptions.visibilityTime, topOffset = initialOptions.topOffset, bottomOffset = initialOptions.bottomOffset, keyboardOffset = initialOptions.keyboardOffset, onShow = initialOptions.onShow, onHide = initialOptions.onHide, onPress = initialOptions.onPress, props = initialOptions.props } = params;\n        setData({\n            text1,\n            text2\n        });\n        setOptions(mergeIfDefined(initialOptions, {\n            type,\n            position,\n            autoHide,\n            visibilityTime,\n            topOffset,\n            bottomOffset,\n            keyboardOffset,\n            onShow,\n            onHide,\n            onPress,\n            props\n        }));\n        // TODO: validate input\n        // TODO: use a queue when Toast is already visible\n        setIsVisible(true);\n        onShow();\n    }, [initialOptions, log]);\n    React.useEffect(() => {\n        const { autoHide } = options;\n        if (isVisible) {\n            if (autoHide) {\n                startTimer();\n            }\n            else {\n                clearTimer();\n            }\n        }\n    }, [isVisible, options, startTimer, clearTimer]);\n    return {\n        isVisible,\n        data,\n        options,\n        show,\n        hide\n    };\n}\n"]},"metadata":{},"sourceType":"module"}