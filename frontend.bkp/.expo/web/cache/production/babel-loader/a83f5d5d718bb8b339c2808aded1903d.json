{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}import*as React from'react';import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import View from\"react-native-web/dist/exports/View\";import TabBar from\"./TabBar\";import SceneView from\"./SceneView\";import Pager from\"./Pager\";export default function TabView(_ref){var onIndexChange=_ref.onIndexChange,navigationState=_ref.navigationState,renderScene=_ref.renderScene,initialLayout=_ref.initialLayout,_ref$keyboardDismissM=_ref.keyboardDismissMode,keyboardDismissMode=_ref$keyboardDismissM===void 0?'auto':_ref$keyboardDismissM,_ref$lazy=_ref.lazy,lazy=_ref$lazy===void 0?false:_ref$lazy,_ref$lazyPreloadDista=_ref.lazyPreloadDistance,lazyPreloadDistance=_ref$lazyPreloadDista===void 0?0:_ref$lazyPreloadDista,onSwipeStart=_ref.onSwipeStart,onSwipeEnd=_ref.onSwipeEnd,_ref$renderLazyPlaceh=_ref.renderLazyPlaceholder,renderLazyPlaceholder=_ref$renderLazyPlaceh===void 0?function(){return null;}:_ref$renderLazyPlaceh,_ref$renderTabBar=_ref.renderTabBar,renderTabBar=_ref$renderTabBar===void 0?function(props){return React.createElement(TabBar,props);}:_ref$renderTabBar,sceneContainerStyle=_ref.sceneContainerStyle,style=_ref.style,_ref$swipeEnabled=_ref.swipeEnabled,swipeEnabled=_ref$swipeEnabled===void 0?true:_ref$swipeEnabled,_ref$tabBarPosition=_ref.tabBarPosition,tabBarPosition=_ref$tabBarPosition===void 0?'top':_ref$tabBarPosition;var _React$useState=React.useState(_objectSpread({width:0,height:0},initialLayout)),_React$useState2=_slicedToArray(_React$useState,2),layout=_React$useState2[0],setLayout=_React$useState2[1];var jumpToIndex=function jumpToIndex(index){if(index!==navigationState.index){onIndexChange(index);}};var handleLayout=function handleLayout(e){var _e$nativeEvent$layout=e.nativeEvent.layout,height=_e$nativeEvent$layout.height,width=_e$nativeEvent$layout.width;setLayout(function(prevLayout){if(prevLayout.width===width&&prevLayout.height===height){return prevLayout;}return{height:height,width:width};});};return React.createElement(View,{onLayout:handleLayout,style:[styles.pager,style]},React.createElement(Pager,{layout:layout,navigationState:navigationState,keyboardDismissMode:keyboardDismissMode,swipeEnabled:swipeEnabled,onSwipeStart:onSwipeStart,onSwipeEnd:onSwipeEnd,onIndexChange:jumpToIndex},function(_ref2){var position=_ref2.position,render=_ref2.render,addEnterListener=_ref2.addEnterListener,jumpTo=_ref2.jumpTo;var sceneRendererProps={position:position,layout:layout,jumpTo:jumpTo};return React.createElement(React.Fragment,null,tabBarPosition==='top'&&renderTabBar(_objectSpread(_objectSpread({},sceneRendererProps),{},{navigationState:navigationState})),render(navigationState.routes.map(function(route,i){return React.createElement(SceneView,_extends({},sceneRendererProps,{addEnterListener:addEnterListener,key:route.key,index:i,lazy:typeof lazy==='function'?lazy({route:route}):lazy,lazyPreloadDistance:lazyPreloadDistance,navigationState:navigationState,style:sceneContainerStyle}),function(_ref3){var loading=_ref3.loading;return loading?renderLazyPlaceholder({route:route}):renderScene(_objectSpread(_objectSpread({},sceneRendererProps),{},{route:route}));});})),tabBarPosition==='bottom'&&renderTabBar(_objectSpread(_objectSpread({},sceneRendererProps),{},{navigationState:navigationState})));}));}var styles=StyleSheet.create({pager:{flex:1,overflow:'hidden'}});","map":{"version":3,"sources":["TabView.tsx"],"names":["keyboardDismissMode","lazy","lazyPreloadDistance","renderLazyPlaceholder","renderTabBar","props","swipeEnabled","tabBarPosition","width","height","initialLayout","jumpToIndex","index","navigationState","onIndexChange","handleLayout","e","setLayout","prevLayout","styles","jumpTo","sceneRendererProps","position","layout","render","route","sceneContainerStyle","loading","renderScene","pager","flex","overflow"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  StyleSheet,\n  View,\n  StyleProp,\n  ViewStyle,\n  LayoutChangeEvent,\n} from 'react-native';\nimport TabBar from './TabBar';\nimport SceneView from './SceneView';\nimport Pager from './Pager';\nimport type {\n  Layout,\n  NavigationState,\n  Route,\n  SceneRendererProps,\n  PagerProps,\n} from './types';\n\nexport type Props<T extends Route> = PagerProps & {\n  onIndexChange: (index: number) => void;\n  navigationState: NavigationState<T>;\n  renderScene: (props: SceneRendererProps & { route: T }) => React.ReactNode;\n  renderLazyPlaceholder?: (props: { route: T }) => React.ReactNode;\n  renderTabBar?: (\n    props: SceneRendererProps & { navigationState: NavigationState<T> }\n  ) => React.ReactNode;\n  tabBarPosition?: 'top' | 'bottom';\n  initialLayout?: Partial<Layout>;\n  lazy?: ((props: { route: T }) => boolean) | boolean;\n  lazyPreloadDistance?: number;\n  sceneContainerStyle?: StyleProp<ViewStyle>;\n  style?: StyleProp<ViewStyle>;\n};\n\nexport default function TabView<T extends Route>({\n  onIndexChange,\n  navigationState,\n  renderScene,\n  initialLayout,\n  keyboardDismissMode = 'auto',\n  lazy = false,\n  lazyPreloadDistance = 0,\n  onSwipeStart,\n  onSwipeEnd,\n  renderLazyPlaceholder = () => null,\n  renderTabBar = (props) => <TabBar {...props} />,\n  sceneContainerStyle,\n  style,\n  swipeEnabled = true,\n  tabBarPosition = 'top',\n}: Props<T>) {\n  const [layout, setLayout] = React.useState({\n    width: 0,\n    height: 0,\n    ...initialLayout,\n  });\n\n  const jumpToIndex = (index: number) => {\n    if (index !== navigationState.index) {\n      onIndexChange(index);\n    }\n  };\n\n  const handleLayout = (e: LayoutChangeEvent) => {\n    const { height, width } = e.nativeEvent.layout;\n\n    setLayout((prevLayout) => {\n      if (prevLayout.width === width && prevLayout.height === height) {\n        return prevLayout;\n      }\n\n      return { height, width };\n    });\n  };\n\n  return (\n    <View onLayout={handleLayout} style={[styles.pager, style]}>\n      <Pager\n        layout={layout}\n        navigationState={navigationState}\n        keyboardDismissMode={keyboardDismissMode}\n        swipeEnabled={swipeEnabled}\n        onSwipeStart={onSwipeStart}\n        onSwipeEnd={onSwipeEnd}\n        onIndexChange={jumpToIndex}\n      >\n        {({ position, render, addEnterListener, jumpTo }) => {\n          // All of the props here must not change between re-renders\n          // This is crucial to optimizing the routes with PureComponent\n          const sceneRendererProps = {\n            position,\n            layout,\n            jumpTo,\n          };\n\n          return (\n            <React.Fragment>\n              {tabBarPosition === 'top' &&\n                renderTabBar({\n                  ...sceneRendererProps,\n                  navigationState,\n                })}\n              {render(\n                navigationState.routes.map((route, i) => {\n                  return (\n                    <SceneView\n                      {...sceneRendererProps}\n                      addEnterListener={addEnterListener}\n                      key={route.key}\n                      index={i}\n                      lazy={typeof lazy === 'function' ? lazy({ route }) : lazy}\n                      lazyPreloadDistance={lazyPreloadDistance}\n                      navigationState={navigationState}\n                      style={sceneContainerStyle}\n                    >\n                      {({ loading }) =>\n                        loading\n                          ? renderLazyPlaceholder({ route })\n                          : renderScene({\n                              ...sceneRendererProps,\n                              route,\n                            })\n                      }\n                    </SceneView>\n                  );\n                })\n              )}\n              {tabBarPosition === 'bottom' &&\n                renderTabBar({\n                  ...sceneRendererProps,\n                  navigationState,\n                })}\n            </React.Fragment>\n          );\n        }}\n      </Pager>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  pager: {\n    flex: 1,\n    overflow: 'hidden',\n  },\n});\n"]},"metadata":{},"sourceType":"module"}